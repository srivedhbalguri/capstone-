<html>
    <head>
        <title>Social Network</title>
        <link rel="stylesheet" href="/public/css/main.css">
    </head>
    <body>
        <nav>
            <div class ="logo">spaceBook</div>
        </nav>
        <div class="signup_div">
            <form method="post" action="" onsubmit="signUp(this);">
            <div>
                <label for="username">Username: </label>
            <input type="text" name="username" id="uname">
            </div>
            <div>
                <label for="password">Password: </label>
            <input type="text" name="password" id="pword">
            </div>
            <div>
                <input type="submit" name="signup_btn" id="signup_btn" value="Signup">
            </div>
            </form>
        </div>

        <script>
            function signUp(form){
                //alert("hello");
                form.signup_btn.setAttribute("disabled","disabled");
                form.signup_btn.innerHTML = "<span>Loading ....</span>";

                var ajax = new XMLHttpRequest();
                ajax.open("POST","/signup",true);

                ajax.onreadystatechange = function(){
                    if(this.readyState=4 && this.status ==200){
                        form.signup_btn.removeAttribute("disabled");
                        form.signup_btn.innerHTML="<span>Signedup</span>";

                        var response = JSON.parse(this.responseText);
                        alert(response.message);

                        if(response.status == "success"){
                            window.location.href = "/login";
                        }
                    }
                };

                ajax.send(new FormData(form));
            }
        </script>
    </body>
</html>